<script type="text/javascript">
    RED.nodes.registerType("plex-ws-playing", {
        category: "plex",
        paletteLabel: "playing",
        color: "#93989f",
        icon: "plex.png",
        defaults: {
            name: { value: "" },
            server: { value: "", type: "plex-ws-server", required: true }
        },
        inputs: 0,
        outputs: 1,
        label: function() {
            return this.name || "playing";
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        }
    });
</script>

<script type="text/x-red" data-template-name="plex-ws-playing">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-bot">Server</label>
        <input type="text" id="node-input-server" placeholder="Server">
    </div>
</script>

<script type="text/x-red" data-help-name="plex-ws-playing">
    <p>Receive messages when a playing notification is received.</p>

    <h3>Details</h3>
    <p>When Plex issues a notification about the playing state, a message will be issued.</p>

    <dl class="message-properties">
        <dt>Name <span class="property-type">string</span></dt>
        <dd>Label for this node for easy reference</dd>
    </dl>

    <h3>Outputs</h3>
    <p>
        The current playing state will be sent as <code>msg.payload</code>. The original
        notification message will be sent as <code>msg.plex</code>.
    </p>

    <dl class="message-properties">
        <dt><code>msg.payload</code></dt>
        <dd>Current state of a session. Possible values are <code>playing</code>, <code>paused</code>, or <code>stopped</code>.</dd>

        <dt><code>msg.session</code></dt>
        <dd>Session the state is referring to. Includes information such as <code>Media</code>, <code>Player</code>, <code>User</code>, etc.</dd>

        <dt><code>msg.plex</code></dt>
        <dd>Original notification from Plex.</dd>
    </dl>
</script>